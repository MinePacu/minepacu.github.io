---
title: "Mermaid 팝업 테스트"
date: 2025-07-27 00:32 +0900
categories: [테스트, Mermaid]
tags: [mermaid, popup, test]
mermaid: true
---

## Mermaid 다이어그램 팝업 기능 테스트

이 페이지는 Mermaid 다이어그램의 팝업 기능을 테스트하기 위한 페이지입니다.

> **디버깅 모드**: 브라우저 개발자 도구(F12)의 콘솔을 열어서 로그를 확인할 수 있습니다.

### 플로우차트 예제

다음 다이어그램을 클릭하면 팝업으로 확대하여 볼 수 있습니다:

```mermaid
graph TD
    A[시작] --> B{조건 확인}
    B -->|Yes| C[작업 수행]
    B -->|No| D[다른 작업]
    C --> E[결과 저장]
    D --> E
    E --> F[종료]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style F fill:#bbf,stroke:#333,stroke-width:2px
```

### 시퀀스 다이어그램 예제

```mermaid
sequenceDiagram
    participant 사용자
    participant 브라우저
    participant 서버
    participant 데이터베이스
    
    사용자->>브라우저: 페이지 요청
    브라우저->>서버: HTTP 요청
    서버->>데이터베이스: 데이터 조회
    데이터베이스-->>서버: 데이터 반환
    서버-->>브라우저: HTML 응답
    브라우저-->>사용자: 페이지 렌더링
```

### 간트 차트 예제

```mermaid
gantt
    title 프로젝트 일정
    dateFormat  YYYY-MM-DD
    section 설계
    요구사항 분석      :done,    des1, 2025-01-01,2025-01-05
    시스템 설계        :done,    des2, 2025-01-06, 2025-01-15
    section 개발
    프론트엔드 개발    :active,  dev1, 2025-01-16, 2025-02-15
    백엔드 개발        :         dev2, 2025-01-20, 2025-02-20
    section 테스트
    단위 테스트        :         test1, 2025-02-16, 2025-02-25
    통합 테스트        :         test2, 2025-02-21, 2025-03-01
```

### 사용 방법

1. **클릭**: 다이어그램을 클릭하면 팝업으로 열립니다
2. **확대/축소**: 
   - 마우스 휠로 확대/축소
   - `+`, `-` 버튼 클릭
   - 키보드 `+`, `-` 키 사용
3. **이동**: 
   - 마우스로 드래그하여 이동
   - 화살표 키로 이동
4. **초기화**: 🏠 버튼 또는 키보드 `0` 키로 초기 위치로 복원
5. **닫기**: 
   - `×` 버튼 클릭
   - `Esc` 키 누르기
   - 팝업 바깥 영역 클릭

### 🎨 시각적 개선사항

- **16:9 비율**: 시각적으로 편안한 와이드스크린 비율
- **어두운 배경**: 가독성 향상을 위한 다크 테마 기본 적용
- **고대비 텍스트**: 흰색 텍스트와 검은색 외곽선으로 최대 가독성 확보
- **향상된 다이어그램**: 모든 선, 박스, 화살표를 흰색으로 강조
- **블러 효과**: 배경에 블러 효과로 집중도 향상
- **고품질 그림자**: 깊이감 있는 그림자로 팝업 강조
- **반투명 컨트롤**: 백드롭 필터 적용으로 모던한 UI

### 📱 다크 테마 최적화

팝업은 가독성을 위해 기본적으로 어두운 배경을 사용합니다:
- **기본 배경**: 진한 회색 (#1a1a1a)
- **콘텐츠 영역**: 중간 회색 (#2d2d2d)
- **텍스트**: 밝은 흰색 + 검은색 외곽선
- **다이어그램 요소**: 모든 선과 테두리 흰색 강조

### 모바일 지원

- **핀치 줌**: 두 손가락으로 확대/축소
- **터치 드래그**: 한 손가락으로 이동
- **반응형 디자인**: 모바일 화면에 최적화된 UI

이 기능을 통해 복잡한 Mermaid 다이어그램도 편리하게 확인할 수 있습니다!

### 중복 팝업 문제 테스트

다음 순서로 테스트해보세요:

1. **첫 번째 다이어그램 클릭** → 팝업 열림
2. **팝업 닫기** (ESC, × 버튼, 또는 바깥 클릭)
3. **다른 다이어그램 클릭** → 팝업이 **한 번만** 열려야 함
4. **같은 다이어그램 다시 클릭** → 팝업이 **한 번만** 열려야 함

> ⚠️ **문제 확인**: 
> - 개발자 도구 콘솔에서 "Opening popup for element X" 메시지가 **한 번만** 나타나는지 확인
> - DOM에서 `.mermaid-popup-overlay` 요소가 **1개만** 존재하는지 확인
> - 여러 팝업이 동시에 열리지 않는지 확인

### 디버깅 도구

브라우저 콘솔에서 다음 명령어로 상태를 확인할 수 있습니다:

```javascript
// 현재 팝업 인스턴스 확인
console.log('Popup instance:', window.globalMermaidPopup);

// DOM에 있는 팝업 오버레이 개수 확인
console.log('Overlay count:', document.querySelectorAll('.mermaid-popup-overlay').length);

// Mermaid 요소들의 이벤트 리스너 확인
document.querySelectorAll('.mermaid').forEach((el, i) => {
  console.log(`Element ${i} has handler:`, !!el.mermaidPopupHandler);
});
```

### 간단한 테스트 다이어그램

```mermaid
graph LR
    A[클릭] --> B[팝업]
    B --> C[닫기]
    C --> A
```
