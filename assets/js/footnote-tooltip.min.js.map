{"version":3,"file":"footnote-tooltip.min.js","sources":["footnote-tooltip.js"],"sourcesContent":["/**\r\n * Footnote Tooltip Enhancement\r\n * Shows footnote content in a tooltip when hovering over footnote links\r\n */\r\n\r\nclass FootnoteTooltip {\r\n  constructor() {\r\n    this.tooltip = null;\r\n    this.currentFootnoteLink = null;\r\n    this.hideTimeout = null;\r\n    this.scrollTimeout = null;\r\n    this.isMobile = this.detectMobile();\r\n    this.touchStartTime = 0;\r\n    \r\n    this.init();\r\n  }\r\n\r\n  detectMobile() {\r\n    // Check for touch capability and mobile user agent\r\n    return ('ontouchstart' in window || navigator.maxTouchPoints > 0) && \r\n           /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n  }\r\n\r\n  init() {\r\n    // Create tooltip element\r\n    this.createTooltip();\r\n    \r\n    // Add event listeners to all footnote links\r\n    this.addEventListeners();\r\n    \r\n    // Handle dynamic content loading\r\n    this.observeDOMChanges();\r\n    \r\n    // Handle scroll events\r\n    this.addScrollListener();\r\n  }\r\n\r\n  createTooltip() {\r\n    this.tooltip = document.createElement('div');\r\n    this.tooltip.className = 'footnote-tooltip';\r\n    document.body.appendChild(this.tooltip);\r\n    \r\n    console.log('Tooltip created and added to DOM:', this.tooltip);\r\n    console.log('Tooltip computed styles:', window.getComputedStyle(this.tooltip));\r\n  }\r\n\r\n  addEventListeners() {\r\n    const footnoteLinks = document.querySelectorAll('a.footnote');\r\n    \r\n    footnoteLinks.forEach(link => {\r\n      if (link.footnoteTooltipHandler) return; // Prevent duplicate handlers\r\n      \r\n      const showTooltip = (e) => this.showTooltip(e, link);\r\n      const hideTooltip = () => this.hideTooltip();\r\n      const handleTouch = (e) => this.handleTouch(e, link);\r\n      \r\n      // Desktop events\r\n      link.addEventListener('mouseenter', showTooltip);\r\n      link.addEventListener('mouseleave', hideTooltip);\r\n      link.addEventListener('focus', showTooltip);\r\n      link.addEventListener('blur', hideTooltip);\r\n      \r\n      // Mobile touch events\r\n      link.addEventListener('touchstart', handleTouch, { passive: false });\r\n      link.addEventListener('click', (e) => this.handleClick(e, link), { passive: false });\r\n      \r\n      // Mark as having handler to prevent duplicates\r\n      link.footnoteTooltipHandler = true;\r\n    });\r\n    \r\n    // Add global touch listener to hide tooltip when touching elsewhere\r\n    document.addEventListener('touchstart', (e) => this.handleGlobalTouch(e), { passive: true });\r\n  }\r\n\r\n  showTooltip(event, link) {\r\n    console.log('showTooltip called for link:', link);\r\n    \r\n    // Clear any pending hide\r\n    if (this.hideTimeout) {\r\n      clearTimeout(this.hideTimeout);\r\n      this.hideTimeout = null;\r\n    }\r\n\r\n    // Get footnote ID from href\r\n    const href = link.getAttribute('href');\r\n    console.log('Link href:', href);\r\n    \r\n    if (!href || !href.startsWith('#fn:')) {\r\n      console.log('Invalid href, returning');\r\n      return;\r\n    }\r\n    \r\n    const footnoteId = href.substring(1); // Remove #\r\n    const footnoteElement = document.getElementById(footnoteId);\r\n    console.log('Footnote element found:', footnoteElement);\r\n    \r\n    if (!footnoteElement) {\r\n      console.log('Footnote element not found, returning');\r\n      return;\r\n    }\r\n\r\n    // Extract footnote content\r\n    const footnoteContent = this.extractFootnoteContent(footnoteElement);\r\n    console.log('Footnote content:', footnoteContent);\r\n    \r\n    if (!footnoteContent) {\r\n      console.log('No footnote content, returning');\r\n      return;\r\n    }\r\n\r\n    // Update tooltip content\r\n    this.tooltip.innerHTML = footnoteContent;\r\n    console.log('Tooltip content updated');\r\n    \r\n    // Position tooltip\r\n    this.positionTooltip(event, link);\r\n    console.log('Tooltip positioned');\r\n    \r\n    // Show tooltip\r\n    this.currentFootnoteLink = link;\r\n    this.tooltip.classList.add('show');\r\n    \r\n    // Force visibility with inline styles as backup\r\n    this.tooltip.style.display = 'block';\r\n    this.tooltip.style.visibility = 'visible';\r\n    this.tooltip.style.opacity = '1';\r\n    this.tooltip.style.zIndex = '10000';\r\n    \r\n    console.log('Tooltip show class added and forced visible');\r\n    \r\n    // Final verification\r\n    setTimeout(() => {\r\n      const computedStyle = window.getComputedStyle(this.tooltip);\r\n      console.log('Final tooltip state:', {\r\n        element: this.tooltip,\r\n        classList: Array.from(this.tooltip.classList),\r\n        computedStyles: {\r\n          display: computedStyle.display,\r\n          visibility: computedStyle.visibility,\r\n          opacity: computedStyle.opacity,\r\n          position: computedStyle.position,\r\n          left: computedStyle.left,\r\n          top: computedStyle.top,\r\n          zIndex: computedStyle.zIndex\r\n        },\r\n        boundingRect: this.tooltip.getBoundingClientRect()\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  hideTooltip() {\r\n    // Add small delay to prevent flickering\r\n    this.hideTimeout = setTimeout(() => {\r\n      this.tooltip.classList.remove('show');\r\n      this.currentFootnoteLink = null;\r\n      \r\n      // Remove inline styles that force visibility\r\n      this.tooltip.style.display = '';\r\n      this.tooltip.style.visibility = '';\r\n      this.tooltip.style.opacity = '';\r\n      this.tooltip.style.zIndex = '';\r\n      \r\n      console.log('Tooltip hidden and inline styles cleared');\r\n    }, 100);\r\n  }\r\n\r\n  handleTouch(event, link) {\r\n    // Record touch start time for tap detection\r\n    this.touchStartTime = Date.now();\r\n    \r\n    if (this.isMobile) {\r\n      // Prevent default touch behavior to avoid conflicts\r\n      event.preventDefault();\r\n      \r\n      // If tooltip is already shown for this link, hide it\r\n      if (this.currentFootnoteLink === link && this.tooltip.classList.contains('show')) {\r\n        this.hideTooltip();\r\n        return;\r\n      }\r\n      \r\n      // Hide any existing tooltip first\r\n      if (this.currentFootnoteLink && this.currentFootnoteLink !== link) {\r\n        this.hideTooltip();\r\n      }\r\n      \r\n      // Show tooltip after a brief delay\r\n      setTimeout(() => {\r\n        this.showTooltip(event, link);\r\n      }, 50);\r\n    }\r\n  }\r\n\r\n  handleClick(event, link) {\r\n    // On mobile, if we're showing a tooltip, prevent navigation\r\n    if (this.isMobile) {\r\n      const touchDuration = Date.now() - this.touchStartTime;\r\n      \r\n      // If it's a quick tap (not a long press) and tooltip is visible, prevent default navigation\r\n      if (touchDuration < 500 && this.currentFootnoteLink === link && this.tooltip.classList.contains('show')) {\r\n        event.preventDefault();\r\n        return false;\r\n      }\r\n      \r\n      // If tooltip is not showing, let the default behavior (navigation) happen\r\n      if (!this.tooltip.classList.contains('show')) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleGlobalTouch(event) {\r\n    // Hide tooltip when touching outside of it or the current footnote link\r\n    if (!this.isMobile || !this.tooltip.classList.contains('show')) {\r\n      return;\r\n    }\r\n    \r\n    const target = event.target;\r\n    const isTooltip = this.tooltip.contains(target);\r\n    const isCurrentLink = this.currentFootnoteLink && this.currentFootnoteLink.contains(target);\r\n    \r\n    if (!isTooltip && !isCurrentLink) {\r\n      this.hideTooltip();\r\n    }\r\n  }\r\n\r\n  extractFootnoteContent(footnoteElement) {\r\n    // Try to get the paragraph content\r\n    const paragraph = footnoteElement.querySelector('p');\r\n    if (paragraph) {\r\n      // Clone the paragraph to avoid modifying original\r\n      const clone = paragraph.cloneNode(true);\r\n      \r\n      // Remove the reverse footnote link\r\n      const reverseLink = clone.querySelector('a.reversefootnote');\r\n      if (reverseLink) {\r\n        reverseLink.remove();\r\n      }\r\n      \r\n      // Clean up whitespace\r\n      return clone.innerHTML.trim();\r\n    }\r\n    \r\n    // Fallback: get text content\r\n    const textContent = footnoteElement.textContent || footnoteElement.innerText;\r\n    return textContent.replace(/â†©.*$/, '').trim(); // Remove reverse link text\r\n  }\r\n\r\n  positionTooltip(event, link) {\r\n    // First, temporarily show tooltip off-screen to measure its size\r\n    this.tooltip.style.visibility = 'hidden';\r\n    this.tooltip.style.opacity = '1';\r\n    this.tooltip.style.left = '-9999px';\r\n    this.tooltip.style.top = '-9999px';\r\n    this.tooltip.classList.add('show');\r\n    \r\n    const linkRect = link.getBoundingClientRect();\r\n    const tooltipRect = this.tooltip.getBoundingClientRect();\r\n    const viewportWidth = window.innerWidth;\r\n    const viewportHeight = window.innerHeight;\r\n    \r\n    console.log('Link rect:', linkRect);\r\n    console.log('Tooltip rect:', tooltipRect);\r\n    console.log('Viewport:', { width: viewportWidth, height: viewportHeight });\r\n    \r\n    // For fixed positioning, use viewport coordinates (no scroll offset needed)\r\n    // Default position: above the link, centered\r\n    let left = linkRect.left + (linkRect.width / 2) - (tooltipRect.width / 2);\r\n    let top = linkRect.top - tooltipRect.height - 10; // 10px gap\r\n    \r\n    console.log('Initial position:', { left, top });\r\n    \r\n    // Adjust horizontal position if tooltip goes off screen\r\n    if (left < 10) {\r\n      left = 10;\r\n    } else if (left + tooltipRect.width > viewportWidth - 10) {\r\n      left = viewportWidth - tooltipRect.width - 10;\r\n    }\r\n    \r\n    // If tooltip goes above viewport, show below the link instead\r\n    if (top < 10) {\r\n      top = linkRect.bottom + 10;\r\n      // Adjust arrow direction by toggling a class\r\n      this.tooltip.classList.add('below');\r\n      console.log('Positioning below link');\r\n    } else {\r\n      this.tooltip.classList.remove('below');\r\n      console.log('Positioning above link');\r\n    }\r\n    \r\n    console.log('Final position:', { left, top });\r\n    \r\n    // Apply final position and make visible\r\n    this.tooltip.style.left = `${left}px`;\r\n    this.tooltip.style.top = `${top}px`;\r\n    this.tooltip.style.visibility = 'visible';\r\n    // Don't set opacity to 0 here since we already forced it to 1 earlier\r\n    \r\n    console.log('Tooltip styles applied:', {\r\n      left: this.tooltip.style.left,\r\n      top: this.tooltip.style.top,\r\n      visibility: this.tooltip.style.visibility,\r\n      opacity: this.tooltip.style.opacity,\r\n      classList: Array.from(this.tooltip.classList)\r\n    });\r\n  }\r\n\r\n  observeDOMChanges() {\r\n    // Watch for dynamically added content\r\n    const observer = new MutationObserver((mutations) => {\r\n      let shouldUpdate = false;\r\n      \r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'childList') {\r\n          mutation.addedNodes.forEach((node) => {\r\n            if (node.nodeType === Node.ELEMENT_NODE) {\r\n              if (node.querySelector && node.querySelector('a.footnote')) {\r\n                shouldUpdate = true;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      if (shouldUpdate) {\r\n        // Small delay to ensure DOM is stable\r\n        setTimeout(() => this.addEventListeners(), 100);\r\n      }\r\n    });\r\n    \r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  }\r\n\r\n  addScrollListener() {\r\n    // Handle scroll events to reposition tooltip if visible\r\n    window.addEventListener('scroll', () => {\r\n      if (this.currentFootnoteLink && this.tooltip.classList.contains('show')) {\r\n        // Clear previous timeout\r\n        if (this.scrollTimeout) {\r\n          clearTimeout(this.scrollTimeout);\r\n        }\r\n        \r\n        // Debounce scroll events and reposition tooltip\r\n        this.scrollTimeout = setTimeout(() => {\r\n          this.positionTooltip(null, this.currentFootnoteLink);\r\n        }, 10);\r\n      }\r\n    }, { passive: true });\r\n    \r\n    // Also handle resize events\r\n    window.addEventListener('resize', () => {\r\n      if (this.currentFootnoteLink && this.tooltip.classList.contains('show')) {\r\n        this.positionTooltip(null, this.currentFootnoteLink);\r\n      }\r\n    }, { passive: true });\r\n  }\r\n}\r\n\r\n// Initialize when DOM is ready\r\nif (document.readyState === 'loading') {\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    new FootnoteTooltip();\r\n  });\r\n} else {\r\n  new FootnoteTooltip();\r\n}\r\n\r\n// Export for potential external use\r\nwindow.FootnoteTooltip = FootnoteTooltip;\r\n"],"names":[],"mappings":"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"}